## Design of a Decentralized Fixed-Income Lending Automated Market Maker Protocol Supporting Arbitrary Maturities

Tianyi Ma
_Antai College of Economics and Management_
_Shanghai Jiao Tong University_
Shanghai, China
harryma-shs@sjtu.edu.cn



_**Abstract**_ **—In decentralized finance (DeFi), designing fixed-**
**income lending automated market makers (AMMs) is extremely**
**challenging due to time-related complexities. Moreover, existing**
**protocols only support single-maturity lending. Building upon**
**the BondMM protocol, this paper argues that its mathemat-**
**ical invariants are sufficiently elegant to be generalized to**
**arbitrary maturities. This paper thus propose an improved**
**design, BondMM-A, which supports lending activities of any**
**maturity. By integrating fixed-income instruments of varying**
**maturities into a single smart contract, BondMM-A offers users**
**and liquidity providers (LPs) greater operational freedom and**
**capital efficiency. Experimental results show that BondMM-**
**A performs excellently in terms of interest rate stability and**
**financial robustness.**
_**Index Terms**_ **—Decentralized Finance; Blockchain; Automated**
**Market Maker; Fixed Income**


I. INTRODUCTION


Following the 2008 financial crisis, the emergence and
development of Bitcoin [1] and blockchain technology have
introduced disruptive changes to the financial sector. Bitcoin
pioneered decentralized digital money, and Ethereum [2], with
its smart contract capabilities, further expanded blockchain
applications in finance, catalyzing the rise of Decentralized
Finance (DeFi) [3] and attracting massive participation.
In traditional finance, fixed-income instruments—commonly known as bonds—are financial assets that
promise predetermined cash flows at specified future dates.
They hold a dominant position in global financial markets:
as of year-end 2023, global equity market capitalization
stood at approximately $115 trillion, while the global bond
market reached $141 trillion. Moreover, daily U.S. bond
trading volume is roughly twice that of equities [1] . Despite the
DeFi lending market having grown to $54.6 billion [2], truly
fixed-income products remain rare [4]- [8].
Building on the BondMM protocol [9], this paper proposes BondMM-A, a novel AMM-based smart contract design
supporting arbitrary maturities for decentralized fixed-income
lending, aiming to meet this unmet market demand.
**Related Work and Limitations:** In DeFi, lacking traditional financial intermediaries, lending is typically facilitated
through Automated Market Makers (AMMs). An AMM is
a smart contract that enables users to lend, withdraw loans,


[1Data Source: Huatai Xingzhi (reprinted)](https://stock.jrj.com.cn/2024/12/03080145936337.shtml)
[2Data Source: DefiLlama](https://defillama.com/protocols/Lending)



borrow, and repay. Liquidity Providers (LPs) initially fund
the AMM’s liquidity pool, and all user interactions occur
directly with this pool. LPs earn fees or interest spreads as
compensation.


Dominant DeFi lending protocols—such as AAVE [4],
Compound [5], and MakerDAO [6]—primarily employ variable interest rates, treating fixed rates as supplementary features. Dedicated fixed-income protocols include Yield Protocol

[7] and Notional Protocol [8].


Theoretically, these protocols set identical borrowing and
lending rates, meaning LPs profit only from transaction fees.
This requires sufficient secondary market trading (discussed
below) rather than primary issuance. Speculators prefer longerdated bonds due to higher leverage potential, yet current fixedincome AMMs offer only short maturities (maximum 1 year),
limiting market depth. The Yield Protocol suffers from low
capital efficiency and insufficient liquidity, often halting under
stress. Notional Protocol attempts to resolve this but introduces
new issues, such as excessively high pricing.


The BondMM protocol [9] uses a set of simple, closed-form
mathematical invariants to achieve fair pricing, high capital
efficiency, and stable LP equity, offering a promising path
forward. However, like others, it supports only single-maturity
products per contract. Since each AMM requires separate LP
funding, multi-maturity support necessitates multiple disjoint
liquidity pools, exposing LPs to fragmented capital risk.


**Contributions:** This paper enhances BondMM to propose
BondMM-A, which supports arbitrary maturities within a
single contract. Users can now choose from a continuous
range of maturities in one interface, increasing flexibility.
LPs provide liquidity to a unified pool, eliminating capital
fragmentation. Overall, BondMM-A integrates user and LP
needs, improving operational efficiency and capital utilization,
and offering an innovative solution for decentralized fixedincome markets.


The remainder of this paper is structured as follows: Section
II introduces foundational concepts; Section III details the
BondMM-A design; Section IV presents experimental evaluation; Section V concludes with future outlook.


II. PRELIMINARIES


_A. Fixed-Income Instruments and Interest Rates_



Mathematically, a fixed-income instrument can be represented as a pair of sequences: _{ti}_ and _{Cti}_, where _ti_ means
cash flow times and _Cti_ means cash flow amounts. Typically,
_Ct_ 1 _<_ 0, and _Cti >_ 0 for _i >_ 1. This means investors pay an
initial outflow to purchase the bond, and receive subsequent
inflows without further payment.
In the simplest case, _{ti}_ = _{_ 0 _, T_ _}_, _{Cti}_ = _{−P, F_ _}_,
where _P_ is the bond price and _F_ is the face value. Example: A
2-year bond with _F_ = 100, _P_ = 95 yields 5 in interest, giving
a simple return of 5 _/_ 95 _≈_ 5 _._ 26%. To distinguish different

1

maturities, practitioners use the annualized rate _R_ = _[F]_ 2 _−_ 1 _≈_



1

maturities, practitioners use the annualized rate _R_ = _P_ _[F]_ 2 _−_ 1 _≈_

2 _._ 60%. This interprets the 2-year bond as two consecutive
1-year bonds: investing _P_ at the start of year one returns
_P_ (1 + _R_ ) at year-end; reinvesting at the same rate returns
_P_ (1 + _R_ ) [2] at year two. If the annualized rate is constant
over time, it satisfies [�] _Cti_ (1 + _R_ ) _[−][t][i]_ = 0. In continuous



_P_



_Cti_ (1 + _R_ ) _[−][t][i]_ = 0. In continuous
_i_



_Ctie_ _[−][t][i][r]_ = 0. In the
_i_



changes the two balances inversely. Lending injects cash and
receives bonds; withdrawing injects bonds and receives cash.
Borrowing requires collateral (often worth 150% of the loan),
receives cash, and the pool mints bonds; repaying injects cash,
returns collateral, and the pool burns bonds. If a borrower fails
to repay before maturity, the pool liquidates collateral. Any
trade can be expressed as (∆ _x,_ ∆ _y_ ): ∆ _x >_ 0 (i.e., ∆ _y <_ 0)
for borrowing or withdrawing, and ∆ _x <_ 0 (i.e., ∆ _y >_ 0) for
lending or repaying.
An ideal fixed-income AMM should satisfy:
**Property 1 (Operability):** After a trade (∆ _x,_ ∆ _y_ ) on AMM
( _x, y_ ), balances remain nonnegative: _x_ +∆ _x ≥_ 0 _, y_ +∆ _y ≥_ 0.
**Property 2 (Computability):** Given ∆ _x_, compute the
unique ∆ _y_ (or prove it absent) in constant time, and vice versa.
**Property 3 (Par Redemption):** At _t_ = 0, _r_ = 0 _, p_ =
1, independent of _x, y_ ; one unit of bond equals one unit of
currency.
**Property** **4** **(Path** **Independence):** For fixed _t_, if
(∆ _x_ 1 _,_ ∆ _y_ 1) and (∆ _x_ 2 _,_ ∆ _y_ 2) are two consecutive valid trades
from state ( _x, y_ ), then (∆ _x_ 1 +∆ _x_ 2 _,_ ∆ _y_ 1 +∆ _y_ 2) is also valid.
Equivalently, buying ∆ _x_ 1 then ∆ _x_ 2 units of bonds at the same
moment equals buying ∆ _x_ 1 + ∆ _x_ 2 once.
Path independence typically comes from a conservation
relation _ft_ ( _x, y_ ) = 0 where, for fixed _t_, _x_ and _y_ map oneto-one in the domain. Any valid trade satisfies _ft_ ( _x_ +∆ _x, y_ +
∆ _y_ ) = 0. Then _r_ = _−_ _∂x_ _[∂y]_ [gives the marginal rate and] _[ p]_ [ =] _[ e][−][tr]_

the marginal price.
**Property 5 (Economic Soundness):** Convergence to market
equilibrium should be stable with limited arbitrage. In particular, rates should be nonnegative, i.e., prices should not exceed
1.


_C. Existing Protocols_


This paper summarizes existing fixed-income AMMs: Yield,
Notional, and BondMM.

_1) Yield Protocol:_ The Yield Protocol [7] constructs the
invariant:


_ft_ ( _x, y_ ) = _x_ [1] _[−][t/T]_ + _y_ [1] _[−][t/T]_ _−_ _C_ ( _t_ ) = 0 _,_


Therefore



compounding, let _r_ = ln(1+ _R_ ); then [�]



example, _r_ = ln(1 + _R_ ) _≈_ 2 _._ 56%. Unless noted, all rates below are continuously compounded annualized rates. Complex
fixed-income products can be decomposed into simple ones
via their cash-flow series, so this paper focus on the simplest
case: _{ti}_ = _{_ 0 _, T_ _}_, _{Cti}_ = _{−P, F_ _}_ .
In reality, market mechanisms equalize rates for products
with the same maturity—the market rate—but it fluctuates over
time, so different maturities carry different rates. In the earlier
example, if both 1-year and 2-year rates are 2 _._ 56% initially
but the 1-year rate rises after one year, the optimal choice
is two consecutive 1-year bonds. Strictly, the instantaneous
rate _r_ is a continuous function _r_ ( _t_ ); a simple product satisfies

     - _T_
_F_ = _Pe_ 0 _[r]_ [d] _[t]_ . Because _r_ ( _t_ ) is uncertain, it is usually assumed
constant over short horizons in practice.
Rate volatility makes bonds speculative assets. Traders can
profit by buying and selling between issuance and maturity.
Trades at issuance and maturity are primary trades that mint
or burn bonds; trades in between are secondary trades that
merely transfer bonds.



_B. Fixed-Income AMM_


Consider a bond maturing at time _T_ with face value 1 (in
some digital currency such as DAI); it can be tokenized. A
fixed-income AMM holds two tokens: bonds and currency.
Currency is supplied by LPs; bonds are minted when the AMM
is created. At any time, let _t_ be time to maturity; the AMM
state is ( _x, y, r, p_ ), where _x, y_ are bond and currency balances,
_r_ is the marginal rate, and _p_ is the marginal price. Assuming no
spread, _r_ is the marginal rate for both lenders and borrowers.
Theoretically _p_ = _e_ _[−][tr]_ _⇔_ _r_ = 1 _t_ [ln] _p_ [1] [. In practice AMMs]

define _r, p_ as functions of ( _x, y_ ) so market forces adjust them;
( _x, y_ ) uniquely determines state, and different designs give
different formulas for _r, p_ .
An AMM typically exposes four operations: lend (buy
bonds), withdraw a loan (sell bonds), borrow, and repay. Each



Here _ϕ_ = _x_ _[y]_ [is the bond-to-cash ratio. When] _[ ϕ <]_ [ 1][,] _[ r <]_ [ 0]

and negative rates appear, violating economic soundness; no
one wants to lend, severely reducing liquidity.



_p_ = _−_ _[∂y]_



_x_




_[∂y]_ - _y_

_∂x_ [=] _x_




- _t/T_
= _ϕ_ _[−][t/T]_ _,_



And thus



_r_ = [1]




[1] [1]

_t_ [ln] _p_




[1] [1]

_p_ [=] _t_




[1] [1]

_t_ [ln] _[ ϕ][t/T]_ [ =] _T_



_T_ [ln] _[ ϕ,]_


_2) Notional Protocol:_ Unlike the general case, the Notional
Protocol [8] prices with simple interest, _p_ (1 + _rt_ ) = 1, where
_t_ is time to maturity. To avoid Yield’s negative-rate issue,
Notional introduces two (possibly time-varying) parameters
_κ ∈_ (0 _,_ 1) and _r_ _[∗]_ _∈_ (0 _,_ 1), where _r_ _[∗]_ is the anchor rate and _κ_
controls rate volatility. Under this protocol,


_r_ = _κ_ ln _ϕ_ + _r_ _[∗]_ _,_


So


1
_p_ =
1 + _rt_ [= (1 +] _[ tκ]_ [ ln] _[ ϕ]_ [ +] _[ tr][∗]_ [)] _[−]_ [1] _[.]_


Notional does not price via a conservation law but via a
pricing formula. Given ∆ _x_, define


_ϕ_ ¯ = _[x]_ [ + ∆] _[x]_

_y −_ ∆ _x_ _[,]_


The average trade price is


_p_ ¯ = (1 + _tκ_ ln _ϕ_ [¯] + _tr_ _[∗]_ ) _[−]_ [1] _,_


So ∆ _y_ = _−p_ ¯∆ _x_ .
If ∆ _x <_ 0 (lend or repay), then ¯ _p <_ 1, so the post-trade
_ϕ_ _[′]_ = _yx−_ +∆ _p_ ¯∆ _xx_ _[<]_ [ ¯] _[ϕ]_ [, giving] _[ p][′][ >]_ [ ¯] _[p]_ [. The user pays a price higher]
than both surrounding marginal prices—an extra interest cost
to LPs—so Notional is less attractive to borrowers. It clearly
lacks path independence. It is also hard to derive ∆ _x_ from
∆ _y_, violating computability.
_3) BondMM Protocol:_ The BondMM protocol [9] introduces the bond present value (current-time price)


_X_ = _xp_ = _xe_ _[−][rt]_ _,_ (1)


And sets the rate as a function of _X/y_ :


_r_ = _R_ ( _ψ_ ) _, ψ_ = _[X]_

_y_ _[,]_


Unlike protocols that keep the bond amount fixed over time,
BondMM seeks—by economic intuition—to keep the present
value of bonds unchanged. With positive rates, present value
decays, so BondMM gradually burns bonds in the pool.
Specifically, BondMM chooses _R_ similar to Notional:


_r_ = _R_ ( _ψ_ ) = _κ_ ln _ψ_ + _r_ _[∗]_ = _κ_ ln _[X]_ (2)

_y_ [+] _[ r][∗][.]_


It can be shown (Tran et al. [9], likewise below):



_p_ = _−_ _[∂y]_

_∂x_ [=] _[ e][−][rt][,]_



And thus


    - _X_
_r_ = _R_

_y_




_⇒_ _y_ = _[X]_

_R_




_−_ 1
( _r_ ) = _[xe][−][rt]_

_R_ _[−]_ [1] ( _r_ ) _[,]_



With initial values ( _x_ 0 _, y_ 0 _, r_ 0), solving the differential equations yields:




     _x_ = _X_ 0 _e_ _[r]_ [0] _e_ [(] _[r][−][r]_ [0] _[/κ]_ [)] _[ e]_ [(] _[r]_ [0] _[−][r][∗][∗]_ [)] _[/κ]_ [ + 1]



_e_ [(] _[r][−][r][∗]_ [)] _[/κ]_ + 1



1+ _κt_

_,_



1+ _κt_ _,_




_y_ = _y_ 0




- _e_ ( _r_ 0 _−r∗_ ) _/κ_ + 1

_e_ [(] _[r][−][r][∗]_ [)] _[/κ]_ + 1



Hence BondMM satisfies the invariant


_Kx_ _[α]_ + _y_ _[α]_ = _C,_ (3)


Where


_α_ = (1 + _κt_ ) _[−]_ [1] _, K_ = _e_ _[−][tr][∗][α]_ _, C_ = _y_ 0 _[α]_ [[] _[e]_ [(] _[r]_ [0] _[−][r][∗]_ [)] _[/κ]_ [ + 1]] _[,]_ (4)


And _X_ and _y_ also satisfy an invariant:


_y_ _[α]_ ( _[X]_ (5)

_y_ [+ 1) =] _[ C.]_


For a new trade (∆ _x,_ ∆ _y_ ), the AMM state before and after
satisfies the invariant (3):


_K_ ( _x_ + ∆ _x_ ) _[α]_ + ( _y_ + ∆ _y_ ) _[α]_ = _C_ = _Kx_ _[α]_ + _y_ _[α]_ _,_


Thus, the following can be calculated from ∆ _x_ :


∆ _y_ = [ _C −_ _K_ ( _x_ + ∆ _x_ ) _[α]_ ] [1] _[/α]_ _−_ _y_



��
_X_


_y_



�1 _/α_
+ _e_ _[−][r][∗][t]_ [ ∆] _[x]_

_y_




- _α_ �1 _/α_




_−_ _y,_


(6)



= _y_




_X_

_y_ [+ 1] _[ −]_



�1 _/α_
+ _e_ _[−][r][∗][t]_ [ ∆] _[x]_



Similarly, the following can be calculated from ∆ _y_ :



_y_ - _a_ �1 _/α_ - _X_

_−_
_y_ [+ 1] _y_



�1 _/α_ [�]



_y_



∆ _x_ = _e_ _[r][∗][t]_ _y_



��
_X_




   - ∆ _y_
_y_ [+ 1] _[ −]_ _y_



_._



1
_r_ =
1 + _κt_




- _κ_ ln _[x]_ _,_

_y_ [+] _[ r][∗]_



�� _x_
_p_ =

_y_




_e_ _[r][∗]_ [�] _[−][t/]_ [(1+] _[κt]_ [)] _._



Assume at pool creation LPs deposit _y_ 0 cash and the initial
rate is _r_ 0. To satisfy _r_ 0 = _r_ _[∗]_, _X_ 0 = _y_ 0 is needed, so mint
_x_ 0 = _X_ 0 _/p_ 0 = _X_ 0 _e_ _[T r]_ [0] units of bonds.
At any moment,



(7)
In Tran et al.’s experiments [9], _r_ _[∗]_ is set to _r_ 0 and _κ_ to 0 _._ 02,
but both can vary over time so BondMM can adapt to market
conditions. With suitable parameters, BondMM satisfies operability, computability, par redemption, path independence, and
economic soundness.
BondMM also considers financial stability: the pool’s cash
should cover all debt, so trades that could cause insolvency
are rejected. Let _b_ and _l_ denote borrow and lend amounts; net
equity is _E_ = _y_ + ( _b −_ _l_ ) _p_ . Ideally _E_ = _y_ 0, meaning LPs
neither lose nor gain beyond fees. BondMM rejects lending
when _E_ trends substantially below _y_ 0 [9].


III. BONDMM-A: NEW DESIGN


BondMM replaces face value with present value in the time
conservation, inspiring a new design path. This will bring a
question: Is tokenizing present value instead of the bond itself
be a better way to further simplify fixed-income AMMs and
support arbitrary maturities? Fortunately, BondMM’s elegant
invariants enable this.
From (1) and (2):


_x_ = _Xe_ _[rt]_ = _Xe_ _[r][∗][t]_ [+] _[κt]_ [ ln(] _[X/y]_ [)] _,_ (8)


Because the BondMM-A pool itself has no maturity, AMM
state is no longer tied to clock time. Here _t_ denotes the
maturity of the bond under consideration, and _x_ is the face
value of a _t_ -maturity bond equivalent to the pool’s remaining
present value. The parameters _α, K, C_ in (4) are functions of
_t_, so the invariants (3) and (5) still hold with the new meaning
of _t_, yielding infinitely many invariants at each moment. After
a trade with maturity _t_, only one invariant remains valid;
others break. This does not affect operability, computability,
par redemption, path independence, or economic soundness.
Pricing still follows (6) and (7), with _t_ being the trade’s
maturity. Pool initialization matches BondMM, with required
face value _X_ 0 = _y_ 0 minted.
For implementation, trades specify both amount and maturity, so transferring “present-value tokens” alone is insufficient.
Alternatives include recording each user’s bond face value and
maturity on-chain, or restricting maturities to a finite set and
issuing one token per discrete tenor.
If _r_ _[∗]_ is fixed, BondMM-A would produce identical rates
across maturities, contradicting reality. Since _r_ _[∗]_ can depend
on maturity, the contract can set _r_ _[∗]_ as a function of tenor (e.g.,
a polynomial) and let the owner tune parameters to shape the
curve and match market shifts.
Like BondMM, BondMM-A must ensure solvency. Because
trades span different maturities, simply computing _E_ = _y_ +
( _b −_ _l_ ) _p_ is inefficient. Instead maintain _L_, the present value
of all outstanding borrows minus unrepaid loans, updating it
over time via d ln _L_ = _r_ d _t_ . Then _E_ = _y_ + _L_ ; if _E_ trends
meaningfully below _y_ 0, BondMM-A rejects lending.


IV. EXPERIMENTAL EVALUATION


This paper evaluates BondMM-A [3] focusing on effectiveness
(do rates match market rates?) and stability (is net equity
stable?).
**Parameter setup:** The pool starts with cash _y_ 0 = 1000,
initial rate _r_ 0 = 5%, _κ_ = 0 _._ 02, and a common _r_ _[∗]_ across maturities. The market curve is generated by the Cox-IngersollRoss (CIR) model [10] with _k_ = 0 _._ 4 _, θ_ = 0 _._ 05 _, σ_ = 0 _._ 2.
The horizon is _T_ = 1 year, divided into _N_ = 100000 steps;
each step launches _M_ = 1000 active trades. At each step
end, set _r_ _[∗]_ to the previous step’s market rate. Active trades
follow speculation: if BondMM-A’s rate exceeds the market
rate, users lend; otherwise they borrow. Each trade’s maturity


[3Code: https://github.com/HarryTMa/BondMMA](https://github.com/HarryTMa/BondMMA)



Fig. 1. Comparison of BondMM-A average rate and market rate; they nearly
overlap.


Fig. 2. Difference between BondMM-A average rate and the market rate.


(absolute value of _N_ ( _T −t, T −t_ ) with current time _t_ ) and size
(absolute value of normal distribution _N_ (0 _._ 72 _,_ 1), expected
near 1) are random. Loans and borrows maturing within _T_ are
settled as passive trades. If active and passive trades coexist,
they interleave evenly (e.g., 1000 active and 500 passive imply
2 active then 1 passive). Lending stops if _E_ falls below 99%
of _y_ 0 at any time.
As Figure 1 shows, BondMM-A rates closely track market
rates, demonstrating effectiveness. Figures 2 and 3 show the
rate gap is around 10 _[−]_ [5] and the standard deviation around
10 _[−]_ [4] —both tiny; although they rise slightly later, magnitudes
stay small. BondMM-A is effective.
Figure 4 shows net equity: BondMM-A stays about 1 above
the initial 1000, indicating strong financial stability. Because
equity never dropped below 99% of initial capital, no loan
refusals occurred.


V. CONCLUSION AND OUTLOOK


This paper proposed BondMM-A, a fixed-income AMM
supporting arbitrary maturities. Its design proves effective:
rates align with market levels, volatility is low, net equity is


[9] Tran T, Tran D A, Truong K. Financially-Stable Automated Market Making for Decentralized Fixed-Rate Lending and Trading[C]//2024 IEEE
International Conference on Blockchain and Cryptocurrency (ICBC).
IEEE, 2024: 353-361.

[10] Cox J C, Ingersoll Jr J E, Ross S A. A theory of the term structure of
interest rates[J]. Econometrica, 1985, 53(2): 385-407.



Fig. 3. Standard deviation of BondMM-A rates at each time step.


Fig. 4. BondMM-A net equity minus initial capital.


stable, users gain flexibility, and LPs avoid capital fragmentation—benefiting both sides.
BondMM-A still invites optimization. Future work includes
more precise dynamic parameter tuning for fast markets, richer
yield-curve models to match real-world diversity, and stronger
resilience to extremes. Real deployments will test performance
and security at DeFi scale. Overall, BondMM-A offers a new
design path for decentralized fixed income and a reference for
subsequent research.


REFERENCES


[1] Nakamoto S. Bitcoin: A peer-to-peer electronic cash system[J]. Satoshi
Nakamoto, 2008.

[2] Buterin V. A next-generation smart contract and decentralized application platform[J]. Ethereum White Paper, 2014, 1(1): 1-32.

[3] Schueffel P. Defi: Decentralized finance-an introduction and overview[J].
Journal of Innovation Management, 2021, 9(3): I-XI.

[4] Frangella E, Herskind L. Aave v3 technical paper[J]. 2022.

[5] Leshner R, Hayes G. Compound: The Money Market Protocol—Whitepaper[J]. 2019.

[6] Team M. The Maker Protocol: MakerDAO’s Mulfi-Collateral Dai
(MCD) System[J]. 2019.

[7] Niemerg A, Robinson D, Livnev L. YieldSpace: An automated liquidity
provider for fixed yield tokens[J]. 2020.

[8] Notional Finance. Notional Whitepaper[J]. 2020.


